@page "/newquiz"

<MudPaper Elevation="0" Class="d-flex justify-center" Style="margin-top: 1%;">
    <MudPaper Elevation="0" Width="600px">
        <MudGrid Justify="Justify.FlexStart">
            <MudItem xs="12">
                <MudPaper Class="d-flex flex-column align-center justify-center">
                    <MudTextField T="string" Label="Tytuł" @bind-Value="_title" Style="width: 600px; height: 50px; font-size: 45px;" />
                </MudPaper>
            </MudItem>
            @for (int i = 0; i < _questionList.Count; i++)
            {
                int localindex = i;
                int localQuestionId = _questionList[localindex];

                var localQuestionOptions = _questionOption.Where(x => x.Key == localQuestionId);

                <MudItem xs="12">
                    <MudPaper Elevation="5" Class="d-flex flex-column align-center justify-center">
                        <MudGrid>
                            <MudItem xs="12" Style="margin-top: 1%; margin-left: 1%;">
                                <MudButton OnClick="@(() => DeleteQuestion(localQuestionId))" Variant="Variant.Filled" Color="Color.Error" Style="text-transform:none;">Usuń</MudButton>
                            </MudItem>
                            <MudItem xs="12">
                                <span>count: @localQuestionOptions.Count()</span>
                            </MudItem>
                            <MudItem xs="12" Style="margin-left: 1%; margin-right: 1%;">
                                @foreach (var i in localQuestionOptions)
                                {
                                    var localOption = i;

                                    <MudTextField
                                        ValueChanged="@((string valueChanged) => AddOption(localOption.Key, valueChanged))"
                                        T="string"
                                        Style="font-size: 20px;"
                                        Label="Pytanie"
                                        Variant="Variant.Outlined" />
                                }
                            </MudItem>
                            <MudItem xs="12">
                                <MudButton OnClick="@(() => AddOption(localQuestionId, string.Empty))" Size="Size.Small" StartIcon="@Icons.Material.Filled.Add" Variant="Variant.Filled" Color="Color.Primary">Nowa opcja</MudButton>
                            </MudItem>
                        </MudGrid>
                    </MudPaper>
                </MudItem>
            }
            <MudItem xs="12">
                <MudButton Variant="Variant.Filled" OnClick="AddQuestion" Color="Color.Success" Style="text-transform:none; margin: 0%; padding-left: 2%; padding-right: 2%;">Add new</MudButton>
            </MudItem>
        </MudGrid>
    </MudPaper>
</MudPaper>