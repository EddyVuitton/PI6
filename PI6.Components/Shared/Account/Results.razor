<style>
    .mud-table-cell-custom-group {
        font-weight: 500;
    }

    .mud-table-cell-custom-group-footer {
        padding-bottom: 50px;
        text-align: right;
    }
</style>

<MudPaper Elevation="0">
    @if (FormResultsDto is not null)
    {
        <MudTable Hover="true"
                  Breakpoint="Breakpoint.Sm"
                  FixedHeader="true"
                  Items="@FormResultsDto"
                  GroupBy="@_formResultDefinition"
                  GroupHeaderStyle="background-color:var(--mud-palette-background-grey)"
                  GroupFooterClass="mb-4"
                  Dense="true"
                  Striped="true"
                  Bordered="true">
            <ColGroup>
                <col style="width: 15px;" />
                <col />
                <col />
                <col />
                <col style="width: 15px;" />
                <col style="width: 15px;" />
            </ColGroup>
            <HeaderContent>
                <MudTh>Uczeń</MudTh>
                <MudTh>Data rozpoczęcia</MudTh>
                <MudTh>Data zakończenia</MudTh>
                <MudTh>Wykorzystany czas</MudTh>
                <MudTh>Wynik</MudTh>
            </HeaderContent>
            <GroupHeaderTemplate>
                <MudTh Class="mud-table-cell-custom-group" colspan="5">@context.Key</MudTh>
            </GroupHeaderTemplate>
            <RowTemplate>
                <MudTd>@context.UserFullName</MudTd>
                <MudTd>@context.StartDate.ToString("dd.MM.yyyy HH:mm:ss")</MudTd>
                <MudTd>@context.EndDate.ToString("dd.MM.yyyy HH:mm:ss")</MudTd>
                <MudTd>@($"{context.UsedTime / 60} min {context.UsedTime % 60} sek")</MudTd>
                <MudTd Class="align-self-center">@(Result(context))%</MudTd>
            </RowTemplate>
            <GroupFooterTemplate>
                <MudTh Class="mud-table-cell-custom-group mud-table-cell-custom-group-footer" colspan="5">Średni czas: @(AverageTime(context)), Średni wynik: @(AverageResult(context))</MudTh>
            </GroupFooterTemplate>
        </MudTable>
    }
</MudPaper>